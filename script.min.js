document.addEventListener("DOMContentLoaded",function(){window.addEventListener("load",function(){const e=document.getElementById("preloader");setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.style.display="none"},500)},800)});const e=document.getElementById("theme-toggle"),t=e.querySelector("i"),n=localStorage.getItem("theme"),o=window.matchMedia("(prefers-color-scheme: dark)");"light"===n||!n&&!o.matches?(document.body.classList.add("light-mode"),t.classList.replace("fa-moon","fa-sun")):localStorage.setItem("theme","dark"),e.addEventListener("click",function(){document.body.classList.toggle("light-mode"),document.body.classList.contains("light-mode")?(t.classList.replace("fa-moon","fa-sun"),localStorage.setItem("theme","light")):(t.classList.replace("fa-sun","fa-moon"),localStorage.setItem("theme","dark"))}),AOS.init({duration:800,easing:"ease-in-out",once:!0,mirror:!1,offset:50});const a=document.querySelectorAll(".filter-btn"),r=document.querySelectorAll(".project-card");a.forEach(e=>{e.addEventListener("click",function(){a.forEach(e=>e.classList.remove("active")),this.classList.add("active");const t=this.getAttribute("data-filter");r.forEach(e=>{"all"===t?(e.style.display="block",setTimeout(()=>{e.style.opacity="1",e.style.transform="scale(1)"},100)):e.getAttribute("data-category").includes(t)?(e.style.display="block",setTimeout(()=>{e.style.opacity="1",e.style.transform="scale(1)"},100)):(e.style.opacity="0",e.style.transform="scale(0.8)",setTimeout(()=>{e.style.display="none"},300))})})}),r.forEach(e=>{const t=e.querySelector("a"),n=t?t.getAttribute("href"):null;n&&(e.style.cursor="pointer",e.addEventListener("click",function(e){"A"!==e.target.tagName&&window.open(n,"_blank")}))}),document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);window.scrollTo({top:n.offsetTop-70,behavior:"smooth"})})});const i=document.getElementById("scroll-to-top");window.addEventListener("scroll",function(){window.pageYOffset>300?i.classList.add("visible"):i.classList.remove("visible")}),i.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),document.querySelectorAll(".skill-category li").forEach(e=>{const t=Math.floor(20*Math.random())+75,n=document.createElement("div");n.classList.add("skill-progress");const o=document.createElement("div");o.classList.add("progress-bar"),o.setAttribute("data-width",t+"%"),n.appendChild(o),e.appendChild(n)});const s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.querySelectorAll(".progress-bar");t.forEach(e=>{const t=e.getAttribute("data-width");setTimeout(()=>{e.style.width=t},200)})}})},{threshold:.5});document.querySelectorAll(".skill-category").forEach(e=>{s.observe(e)});const c=document.getElementById("contact-form"),l=document.getElementById("form-status");function d(){const e=c.querySelectorAll(".form-group");e.forEach(e=>{const t=e.querySelector("input, textarea"),n=document.createElement("div");n.className="error-message",e.appendChild(n)})}function m(){let e=!0;const t=c.querySelectorAll(".form-group");t.forEach(e=>{e.classList.remove("error")});const n=document.getElementById("name"),o=n.closest(".form-group"),a=o.querySelector(".error-message");n.value.trim()||(o.classList.add("error"),a.textContent="Please enter your name",e=!1);const r=document.getElementById("email"),i=r.closest(".form-group"),s=i.querySelector(".error-message");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.value.trim())||(i.classList.add("error"),s.textContent="Please enter a valid email address",e=!1);const l=document.getElementById("subject"),d=l.closest(".form-group"),m=d.querySelector(".error-message");l.value.trim()||(d.classList.add("error"),m.textContent="Please enter a subject",e=!1);const u=document.getElementById("message"),f=u.closest(".form-group"),p=f.querySelector(".error-message");return u.value.trim().length<10&&(f.classList.add("error"),p.textContent="Message must be at least 10 characters",e=!1),e}c&&(d(),document.getElementById("message").addEventListener("keydown",function(e){"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),c.dispatchEvent(new Event("submit")))}),c.addEventListener("submit",function(e){if(e.preventDefault(),!m())return l.textContent="Please fix the errors in the form.",l.className="form-status error",l.style.display="block",void setTimeout(()=>{l.style.animation="slideOut 0.3s ease forwards",setTimeout(()=>{l.style.display="none",l.style.animation="slideIn 0.3s ease forwards"},300)},5e3);const t=e.target,n=new FormData(t),o=c.querySelector(".submit-btn"),a=o.innerHTML;o.innerHTML='<span class="spinner"><i class="fas fa-spinner fa-spin"></i></span> Sending...',o.classList.add("loading"),o.disabled=!0,fetch(t.action,{method:t.method,body:n,headers:{Accept:"application/json"}}).then(e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")}).then(e=>{o.innerHTML=a,o.classList.remove("loading"),o.disabled=!1,l.textContent="Message sent! Thank you for contacting me.",l.className="form-status success",l.style.display="block",c.reset(),setTimeout(()=>{l.style.animation="slideOut 0.3s ease forwards",setTimeout(()=>{l.style.display="none",l.style.animation="slideIn 0.3s ease forwards"},300)},5e3)}).catch(e=>{o.innerHTML=a,o.classList.remove("loading"),o.disabled=!1,l.textContent="Oops! Something went wrong. Please try again later.",l.className="form-status error",l.style.display="block",setTimeout(()=>{l.style.animation="slideOut 0.3s ease forwards",setTimeout(()=>{l.style.display="none",l.style.animation="slideIn 0.3s ease forwards"},300)},5e3),console.error("Error:",e)})}))});